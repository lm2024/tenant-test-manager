server:
  port: 8082
  servlet:
    context-path: /
    
# 文件导入导出配置
file:
  import:
    export:
      enabled: true
      import:
        max-batch-size: 20000
        max-files: 20
        concurrent: 1
      export:
        max-batch-size: 50000
        concurrent: 10
      path:
        upload-dir: C:\\Users\\lm\\Downloads\\uploads
        export-dir: C:\\Users\\lm\\Downloads\\exports
      redis:
        key-prefix: "file-io"
        task-ttl: 86400
      swagger:
        enabled: false # 确保禁用 Swagger

spring:
  main:
    allow-bean-definition-overriding: true
    allow-circular-references: true
  application:
    name: my-test-execute
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/tenant_center?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
    username: root
    password: password
  redis:
    host: localhost
    port: 6379
    # password: 如果有密码，请取消注释并填写
    database: 0
    # 使用Redisson客户端
    redisson:
      config: |
        singleServerConfig:
          address: redis://localhost:6379
          database: 0
          # password: 如果有密码，请取消注释并填写
          connectionMinimumIdleSize: 8
          connectionPoolSize: 64
          connectTimeout: 10000
          timeout: 3000
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 200MB
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL57Dialect
    open-in-view: false

# 租户路由配置
tenant:
  routing:
    enabled: true
    header-name: X-Tenant-ID
    required: false  # 设置为false，这样没有租户ID也能访问
    exclude-paths: 
      - /swagger-ui.html
      - /doc.html
      - /actuator/**
      - /api/public/**
    tenant-center:
      url: jdbc:mysql://localhost:3306/tenant_center?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
      username: root
      password: password
    max-pool-size: 10
    min-idle: 2
    connection-timeout: 30000
    idle-timeout: 600000
    max-lifetime: 1800000
    # Redis配置
    redis:
      host: localhost
      port: 6379
      # password: 如果有密码，请取消注释并填写
      database: 0
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1
    # 租户缓存配置
    preload-enabled: true
    cache-expire-time: 604800  # 7天，单位秒
    batch-size: 100

# 日志配置
logging:
  level:
    root: INFO
    com.tenant: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE